<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Google Play — Aryan Guddy New App</title>

<link rel="manifest" id="manifest-link">
<meta name="theme-color" content="#1a73e8">

<style>
  :root{
    --bg:#f4f6f8; --card:#fff; --accent:#1a73e8; --dark:#111827; --muted:#6b7280;
    --radius:14px; --shadow: 0 10px 30px rgba(16,24,40,.08);
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--dark);-webkit-font-smoothing:antialiased}
  .topbar{
    background:#fff;display:flex;align-items:center;gap:14px;padding:14px 18px;border-bottom:1px solid #eef2f7;position:sticky;top:0;z-index:10;
    box-shadow: 0 1px 0 rgba(16,24,40,.02);
  }
  .brand{display:flex;gap:10px;align-items:center}
  .brand .logo{width:28px;height:28px;border-radius:6px;background:linear-gradient(135deg,#1a73e8,#2bb673);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
  .search{flex:1;display:flex;align-items:center;background:#f8fafc;padding:10px;border-radius:12px;border:1px solid #eef2f7}
  .search input{border:0;background:transparent;outline:0;width:100%;font-size:14px;color:var(--muted)}
  .wrap{max-width:980px;margin:22px auto;padding:0 18px;}
  .store{display:grid;grid-template-columns:360px 1fr;gap:20px;align-items:start}
  @media(max-width:880px){.store{grid-template-columns:1fr;padding-bottom:20px}.left{width:100%}}

  /* left card */
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
  .app-head{display:flex;gap:16px;align-items:center}
  .icon{width:96px;height:96px;border-radius:22px;overflow:hidden;flex-shrink:0;border:1px solid rgba(0,0,0,.04)}
  .icon img{width:100%;height:100%;object-fit:cover;display:block}
  .title{display:flex;flex-direction:column;gap:6px}
  h1{font-size:18px;margin:0}
  .meta{color:var(--muted);font-size:13px}

  .install-row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  .btn-main{background:var(--accent);color:#fff;padding:10px 16px;border-radius:12px;border:0;font-weight:700;cursor:pointer;box-shadow:0 8px 20px rgba(26,115,232,.12)}
  .btn-ghost{background:#fff;border:1px solid #e6eefc;padding:10px 14px;border-radius:12px;color:var(--dark);cursor:pointer}
  .btn-subtle{background:#fff;border:1px solid #e6e9ef;padding:8px 12px;border-radius:10px;color:var(--muted);cursor:pointer}

  .screens{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:16px}
  .screen{width:100%;height:150px;border-radius:10px;overflow:hidden;border:1px solid rgba(16,24,40,.04);background:#f3f6f9}
  .screen img{width:100%;height:100%;object-fit:cover;display:block}

  .note{margin-top:12px;color:var(--muted);font-size:13px}

  /* right column */
  .info-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .stat{display:flex;flex-direction:column;gap:6px;padding:14px;border-radius:12px;border:1px solid rgba(16,24,40,.03);background:#fff}
  .stat .big{font-size:20px;font-weight:800}
  .section{margin-top:14px}
  .section h3{margin:0 0 8px 0}
  ul{margin:0;padding-left:18px;color:var(--muted);line-height:1.6}

  footer{max-width:980px;margin:28px auto 80px;padding:0 18px;color:var(--muted);font-size:13px;text-align:center}

  /* Pac-Man overlay */
  #pacmanScreen{display:none;position:fixed;inset:0;background:linear-gradient(180deg,#000,#071022);z-index:99999;align-items:center;justify-content:center;flex-direction:column}
  #pacTopBar{position:absolute;top:14px;left:14px;right:14px;display:flex;justify-content:space-between;align-items:center;color:#fff;z-index:100000}
  #pacCanvas{background:#000;display:block;border-radius:12px;box-shadow:0 12px 40px rgba(2,6,23,.6)}
  .pac-btn{background:rgba(255,255,255,0.06);color:#fff;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;cursor:pointer;margin-left:8px}
  #scoreBox{color:#fff;font-weight:700}
  #pacFooter{position:absolute;bottom:18px;color:#cbd5e1;font-size:13px}
</style>
</head>
<body>

<div class="topbar">
  <div class="brand">
    <div class="logo">G</div>
    <div style="font-weight:700">Play</div>
  </div>
  <div class="search" role="search">
    <svg width="18" height="18" viewBox="0 0 24 24" style="opacity:.6"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 20.49 21.49 19 15.5 14zM10 15a5 5 0 110-10 5 5 0 010 10z"/></svg>
    <input placeholder="Search apps & games" aria-label="Search"/>
  </div>
</div>

<main class="wrap">
  <div class="store">
    <div class="card left">
      <div class="app-head">
        <div class="icon" aria-hidden="true">
          <img src="https://i.pinimg.com/736x/af/22/17/af22173d81bbd2575bb2eda4663425ba.jpg" alt="Aryan Guddy app icon">
        </div>
        <div class="title">
          <h1>Aryan Guddy New App</h1>
          <div class="meta">Editors' Choice • Social • 10M+ installs</div>

          <div class="install-row">
            <button id="installBtn" class="btn-main">Install</button>
            <button id="openBtn" class="btn-ghost" style="display:none">Open</button>
            <button id="playPacmanBtn" class="btn-subtle">Play Pac-Man</button>
            <button id="downloadBtn" class="btn-subtle">Download .html</button>
          </div>
        </div>
      </div>

      <div class="screens" aria-hidden="false" style="margin-top:18px">
        <div class="screen"><img src="https://i.pinimg.com/736x/96/79/1f/96791fb42598a62e576a90fd00f8813e.jpg" alt="screenshot 1"></div>
        <div class="screen"><img src="https://i.pinimg.com/1200x/90/85/23/908523ce3a1c3bca41e121ad53fcf265.jpg" alt="screenshot 2"></div>
        <div class="screen"><img src="https://i.pinimg.com/1200x/a0/8f/5f/a08f5f3358eb09e252b888db5bfb91ce.jpg" alt="screenshot 3"></div>
      </div>

      <div class="note">Tip: open in Chrome on Android over HTTPS or via localhost to trigger Add to Home screen. The app uses an offline-capable service worker.</div>
    </div>

    <div>
      <div class="info-grid">
        <div class="stat">
          <div style="color:var(--muted);font-size:13px">Rating</div>
          <div class="big">4.8</div>
          <div style="color:var(--muted);font-size:13px">2,345,678 reviews</div>
        </div>
        <div class="stat">
          <div style="color:var(--muted);font-size:13px">Size</div>
          <div class="big">~12 MB</div>
          <div style="color:var(--muted);font-size:13px">Version 1.0.0 • Updated recently</div>
        </div>
      </div>

      <div class="section card">
        <h3>About this app</h3>
        <p style="color:var(--muted);line-height:1.5;margin:0">
          Aryan Guddy New App — demo progressive web app. Installs to the home screen and runs standalone. Includes an offline cache and a small built-in Pac-Man minigame for quick play.
        </p>
      </div>

      <div class="section card">
        <h3>Permissions & notes</h3>
        <ul>
          <li>Offline caching via service worker</li>
          <li>Uses only provided images for icon & screenshots</li>
          <li>Install works on Chrome Android (HTTPS or localhost)</li>
        </ul>
      </div>
    </div>
  </div>
</main>

<!-- Pac-Man overlay -->
<div id="pacmanScreen" role="dialog" aria-modal="true">
  <div id="pacTopBar">
    <div id="scoreBox">Score: 0</div>
    <div>
      <button id="restartBtn" class="pac-btn">Restart</button>
      <button id="closePac" class="pac-btn">Close</button>
    </div>
  </div>

  <canvas id="pacCanvas" width="480" height="480" aria-label="Pac-Man game"></canvas>
  <div id="pacFooter">Use arrow keys or swipe to move. Collect all pellets.</div>
</div>

<footer>Demo single-file Play Store PWA — Aryan Guddy New App</footer>

<script>
/* Manifest */
const manifestObj = {
  name: "Aryan Guddy New App",
  short_name: "GuddyApp",
  start_url: "./?homescreen=1",
  scope: "./",
  display: "standalone",
  background_color: "#ffffff",
  theme_color: "#1a73e8",
  icons: [
    {
      src: "https://i.pinimg.com/736x/af/22/17/af22173d81bbd2575bb2eda4663425ba.jpg",
      sizes: "192x192",
      type: "image/jpeg",
      purpose: "any maskable"
    },
    {
      src: "https://i.pinimg.com/736x/af/22/17/af22173d81bbd2575bb2eda4663425ba.jpg",
      sizes: "512x512",
      type: "image/jpeg",
      purpose: "any maskable"
    }
  ],
  screenshots: [
    { src: "https://i.pinimg.com/736x/96/79/1f/96791fb42598a62e576a90fd00f8813e.jpg", type: "image/jpeg", sizes: "720x1280" },
    { src: "https://i.pinimg.com/1200x/90/85/23/908523ce3a1c3bca41e121ad53fcf265.jpg", type: "image/jpeg", sizes: "720x1280" },
    { src: "https://i.pinimg.com/1200x/a0/8f/5f/a08f5f3358eb09e252b888db5bfb91ce.jpg", type: "image/jpeg", sizes: "720x1280" }
  ]
};
const manifestBlob = new Blob([JSON.stringify(manifestObj)], {type: 'application/json'});
document.getElementById('manifest-link').href = URL.createObjectURL(manifestBlob);

/* Service worker (simple cache) */
const swCode = `
const CACHE = 'aryan-guddy-cache-v1';
self.addEventListener('install', evt => {
  self.skipWaiting();
  evt.waitUntil(caches.open(CACHE).then(cache => cache.addAll(['./','./?homescreen=1'])));
});
self.addEventListener('activate', evt => evt.waitUntil(self.clients.claim()));
self.addEventListener('fetch', evt => {
  if (evt.request.method !== 'GET') return;
  evt.respondWith(caches.match(evt.request).then(res => res || fetch(evt.request).then(r => { caches.open(CACHE).then(c => c.put(evt.request, r.clone())); return r; })).catch(()=>caches.match('./')));
});
`;
const swBlob = new Blob([swCode], {type: 'application/javascript'});
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register(URL.createObjectURL(swBlob)).catch(e=>console.warn('sw failed', e));
}

/* PWA install logic */
let deferredPrompt = null;
const installBtn = document.getElementById('installBtn');
const openBtn = document.getElementById('openBtn');
const downloadBtn = document.getElementById('downloadBtn');
const playPacmanBtn = document.getElementById('playPacmanBtn');

window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = 'inline-block';
});
window.addEventListener('appinstalled', () => {
  installBtn.textContent = 'Installed';
  installBtn.disabled = true;
  deferredPrompt = null;
});
installBtn.addEventListener('click', async () => {
  if (!deferredPrompt) { alert('Install prompt not available. Use browser menu → Add to Home screen.'); return; }
  deferredPrompt.prompt();
  const choice = await deferredPrompt.userChoice;
  if (choice.outcome === 'accepted') { installBtn.textContent = 'Installed'; installBtn.disabled = true; }
  deferredPrompt = null;
});
if (window.matchMedia('(display-mode: standalone)').matches || location.search.includes('homescreen=1')) {
  installBtn.style.display = 'none';
  openBtn.style.display = 'inline-block';
}
openBtn.addEventListener('click', ()=> location.href = './?homescreen=1');
downloadBtn.addEventListener('click', ()=> {
  const src = '<!doctype html>\\n' + document.documentElement.outerHTML;
  const blob = new Blob([src], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'aryan-guddy-app.html'; a.click(); URL.revokeObjectURL(url);
});

/* Pac-Man implementation (minimal) */
const pacScreen = document.getElementById('pacmanScreen');
const canvas = document.getElementById('pacCanvas');
const ctx = canvas.getContext('2d');
const scoreBox = document.getElementById('scoreBox');
const closePac = document.getElementById('closePac');
const restartBtn = document.getElementById('restartBtn');

const TILE = 24;
const COLS = 20, ROWS = 20;
canvas.width = COLS * TILE; canvas.height = ROWS * TILE;

let map, player, ghosts, score, pelletsLeft, gameInterval, inputDir;

function newGame(){
  map = [];
  for(let r=0;r<ROWS;r++){
    const row = [];
    for(let c=0;c<COLS;c++){
      if(r===0||c===0||r===ROWS-1||c===COLS-1) row.push(1);
      else if((r%2===0 && c%2===0) && !(r>7 && r<12 && c>7 && c<12)) row.push(1);
      else row.push(2);
    }
    map.push(row);
  }
  for(let r=8;r<=11;r++) for(let c=8;c<=11;c++) map[r][c]=0;
  player = {x:1,y:1,dir:{x:0,y:0}};
  ghosts = [
    {x:COLS-2,y:1,color:'#ff3b30'},
    {x:1,y:ROWS-2,color:'#00d4ff'},
    {x:COLS-2,y:ROWS-2,color:'#ffb84d'}
  ];
  score = 0;
  pelletsLeft = 0;
  for(let r=0;r<ROWS;r++) for(let c=0;c<COLS;c++) if(map[r][c]===2) pelletsLeft++;
  inputDir = null;
  updateScore();
  if(gameInterval) clearInterval(gameInterval);
  gameInterval = setInterval(gameTick, 110);
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const v = map[r][c], x=c*TILE, y=r*TILE;
      if(v===1){ ctx.fillStyle='#14324e'; ctx.fillRect(x,y,TILE,TILE); }
      else if(v===2){ ctx.fillStyle='#ffd54f'; ctx.beginPath(); ctx.arc(x+TILE/2,y+TILE/2,TILE*0.08,0,Math.PI*2); ctx.fill(); }
    }
  }
  // pac
  const pacX = player.x*TILE + TILE/2, pacY = player.y*TILE + TILE/2;
  ctx.fillStyle = '#ffd700';
  const open = Math.abs(Math.sin(Date.now()/120))*0.28 + 0.12;
  let angle = 0;
  if(player.dir.x===1) angle = 0;
  else if(player.dir.x===-1) angle = Math.PI;
  else if(player.dir.y===1) angle = Math.PI/2;
  else if(player.dir.y===-1) angle = -Math.PI/2;
  ctx.beginPath();
  ctx.moveTo(pacX,pacY);
  ctx.arc(pacX,pacY,TILE*0.45,angle+open*Math.PI,angle-open*Math.PI);
  ctx.closePath(); ctx.fill();

  ghosts.forEach(g=>{
    const gx = g.x*TILE + TILE/2, gy = g.y*TILE + TILE/2;
    ctx.fillStyle = g.color;
    ctx.beginPath(); ctx.arc(gx,gy,TILE*0.42,Math.PI,0); ctx.fill();
    ctx.fillRect(gx-TILE*0.42,gy,TILE*0.84,TILE*0.42);
    ctx.fillStyle = '#fff'; ctx.beginPath(); ctx.arc(gx-TILE*0.12,gy-TILE*0.05,TILE*0.12,0,Math.PI*2); ctx.arc(gx+TILE*0.18,gy-TILE*0.05,TILE*0.12,0,Math.PI*2); ctx.fill();
    ctx.fillStyle='#000'; ctx.beginPath(); ctx.arc(gx-TILE*0.12,gy-TILE*0.05,TILE*0.05,0,Math.PI*2); ctx.arc(gx+TILE*0.18,gy-TILE*0.05,TILE*0.05,0,Math.PI*2); ctx.fill();
  });
}

function canMove(x,y){ if(x<0||y<0||x>=COLS||y>=ROWS) return false; return map[y][x] !== 1; }
function tryMove(obj, dir){ const nx=obj.x+dir.x, ny=obj.y+dir.y; if(canMove(nx,ny)){ obj.x=nx; obj.y=ny; obj.dir=dir; return true;} return false; }

function gameTick(){
  if(inputDir) tryMove(player, inputDir);
  else if(player.dir.x||player.dir.y) tryMove(player, player.dir);

  if(map[player.y] && map[player.y][player.x]===2){
    map[player.y][player.x]=0; score+=10; pelletsLeft--; updateScore();
    if(pelletsLeft<=0){ clearInterval(gameInterval); setTimeout(()=>alert('You win! Score: '+score),100); }
  }

  ghosts.forEach(g=>{
    const options = [];
    [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
      if(canMove(g.x+d[0], g.y+d[1])) options.push({x:d[0],y:d[1]});
    });
    if(options.length){
      let chosen = options[Math.floor(Math.random()*options.length)];
      if(Math.random()<0.36){
        options.sort((a,b)=> (Math.hypot((g.x+a.x)-player.x,(g.y+a.y)-player.y) - Math.hypot((g.x+b.x)-player.x,(g.y+b.y)-player.y)));
        chosen = options[0];
      }
      tryMove(g, chosen);
    }
    if(g.x===player.x && g.y===player.y){ clearInterval(gameInterval); setTimeout(()=>alert('Game Over. Score: '+score),100); }
  });

  draw();
}

function updateScore(){ scoreBox.textContent = 'Score: ' + score; }

/* input */
window.addEventListener('keydown', e=>{
  if(getComputedStyle(pacScreen).display === 'none') return;
  if(e.key.includes('Arrow')){ e.preventDefault(); const d=e.key.replace('Arrow',''); if(d==='Left') inputDir={x:-1,y:0}; if(d==='Right') inputDir={x:1,y:0}; if(d==='Up') inputDir={x:0,y:-1}; if(d==='Down') inputDir={x:0,y:1}; }
});

/* touch swipe */
let ts=null;
canvas.addEventListener('touchstart', e=>{ ts=e.touches[0]; }, {passive:true});
canvas.addEventListener('touchend', e=>{ if(!ts) return; const t=e.changedTouches[0]; const dx=t.clientX-ts.clientX, dy=t.clientY-ts.clientY; if(Math.abs(dx)>Math.abs(dy)){ if(dx>20) inputDir={x:1,y:0}; else if(dx<-20) inputDir={x:-1,y:0}; } else { if(dy>20) inputDir={x:0,y:1}; else if(dy<-20) inputDir={x:0,y:-1}; } ts=null; }, {passive:true});

function resizeCanvas(){
  const maxW = Math.min(window.innerWidth - 60, 560);
  const maxH = Math.min(window.innerHeight - 200, 560);
  const size = Math.min(maxW, maxH);
  canvas.style.width = size + 'px';
  canvas.style.height = size + 'px';
}
window.addEventListener('resize', resizeCanvas);
window.addEventListener('orientationchange', ()=> setTimeout(resizeCanvas,200));
resizeCanvas();

/* controls */
playPacmanBtn.addEventListener('click', ()=>{ pacScreen.style.display='flex'; newGame(); draw(); });
closePac.addEventListener('click', ()=>{ pacScreen.style.display='none'; if(gameInterval) clearInterval(gameInterval); });
restartBtn.addEventListener('click', ()=>{ newGame(); draw(); });

/* fallback: show manual hint if no prompt */
setTimeout(()=>{ if(!deferredPrompt){ /* no-op: user can use menu → Add to Home screen */ } }, 800);
</script>
</body>
</html>
